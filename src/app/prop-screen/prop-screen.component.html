<ng-template #gameLog let-gameStats>
  <div style="width:100%">
    <table mat-table [dataSource]="gameStats">
      <ng-container matColumnDef="TeamAgainst">
        <th mat-header-cell *matHeaderCellDef style="padding:0; text-align: center;">Team </th>
        <td mat-cell *matCellDef="let element; let i = seasonArrayTable; let j = index;"
          style="padding-left:5px; padding-right:5px; text-align: center;">
          {{element.homeAway == 'Away' ? '@' : ''}}{{element.teamAgainstName}}
        </td>
      </ng-container>

      <ng-container matColumnDef="Date">
        <th mat-header-cell *matHeaderCellDef style="padding:0;text-align: center;"> Date </th>
        <td mat-cell *matCellDef="let element" style="padding-left:5px; padding-right:5px; text-align: center;">
          {{element.gameDate}}
        </td>
      </ng-container>

      <ng-container matColumnDef="Score">
        <th mat-header-cell *matHeaderCellDef style="padding:0; text-align: center;"> Score </th>
        <td mat-cell *matCellDef="let element" style="padding-left:5px; padding-right:5px; text-align: center;">
          {{element.pointsScoredOverall}} -
          {{element.pointsAllowedOverall}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="moneyLineTableColumns; sticky:true"
        style="width:auto; height:auto; font-size: medium; text-align:center"></tr>
      <tr mat-row [class.demo-row-is-clicked]="row.isHighlighted" *matRowDef="let row; columns: moneyLineTableColumns; "
        style="height:auto; text-align:center"></tr>
    </table>
  </div>

</ng-template>

<ng-template #playerGameLog let-playerStats>
  <div style="width:100%">
    <table mat-table [dataSource]="playerStats">
      <ng-container matColumnDef="TeamAgainst">
        <th mat-header-cell *matHeaderCellDef style="padding:0; text-align: center;">Team </th>
        <td mat-cell *matCellDef="let element; let i = seasonArrayTable; let j = index;"
          style="padding:0; text-align: center;">
          {{element.homeAway == "away"? "@": ""}}{{element.teamAgainstName}}
        </td>
      </ng-container>

      <ng-container matColumnDef="Date">
        <th mat-header-cell *matHeaderCellDef style="padding:0; text-align: center;"> Date </th>
        <td mat-cell *matCellDef="let element" style="padding:0; text-align: center;"> {{element.gameDate }}
        </td>
      </ng-container>

      <ng-container matColumnDef="Score">
        <th mat-header-cell *matHeaderCellDef style="padding:0; text-align: center;"> {{playerStats.length == 0 ? '' :
          playerStats[0].propName}}</th>
        <td mat-cell *matCellDef="let element" style="padding:0; text-align: center;"> {{element.propNumber}}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="moneyLineTableColumns; sticky:true"
        style="width:auto; height:auto; font-size: medium; text-align:center"></tr>
      <tr mat-row [class.demo-row-is-clicked]="row.isHighlighted" *matRowDef="let row; columns: moneyLineTableColumns; "
        style="height:auto; text-align:center"></tr>
    </table>
  </div>

</ng-template>


<div class="main-div">
  <div class="games-list">
    <!-- <h1 style="margin-top:1rem; text-align: center;">Games</h1> -->
    <button *ngFor="let game of selectedSportGamesFinal" mat-raised-button
      [ngClass]="game[0].selected === true ? 'selected-game' : ''" (click)="onGameClick(game[0][0].bookId)">
      <div style="display:flex; flex-direction: column;">
        <div>
          {{game[0][0].awayTeam}} &#64; {{game[0][0].homeTeam}}
        </div>
        <div>
          {{game[0][0].commenceTime | getDayAndTime}}
        </div>
      </div>

    </button>
  </div>

  <div *ngIf="teamPropIsLoading" style="height:100%; width: 100%; background-color: white;">
    <mat-spinner [mode]="'indeterminate'" style="margin:auto;"></mat-spinner>
  </div>

  <div *ngIf="!teamPropIsLoading" class="prop-div">



    <div style="display:flex; flex-direction: column; width: 100%; margin-top: 1rem;">
      <div style="display:flex">
        <div class="team-and-record" >
          <a class="team-name" >
            <h2 (click)="onTeamClick(awayTeamStatsDisplay.teamName)">{{awayTeamStatsDisplay.gameBookData.teamName + " "}}</h2>
          </a>
          <h2 class="record1" style="text-align: center; margin-right:auto;">({{awayTeamStatsDisplay.overallWins}} -
            {{awayTeamStatsDisplay.overallTotal - awayTeamStatsDisplay.overallWins}})</h2>
        </div>
        <h2 style="width: 4%; text-align: center;">&#64;</h2>
        <div class="team-and-record">
          <a class="team-name" >
            <h2 (click)="onTeamClick(homeTeamStatsDisplay.teamName)">{{homeTeamStatsDisplay.gameBookData.teamName + " "}}</h2>
          </a>
          <h2 class="record2" style="text-align: center; margin-right:auto;">({{homeTeamStatsDisplay.overallWins}} -
            {{homeTeamStatsDisplay.overallTotal - homeTeamStatsDisplay.overallWins}})</h2>
        </div>

      </div>
      <div>
        <div style="display:flex">

          <div class="commence"
            style="width: 10%; display: flex; flex-direction:column; margin-left:auto; margin-right:auto;">
            <h2 class="commence-time" style="width: 100%; text-align: center; margin-bottom:0;">
              {{displayPropHtml2.commenceTime }}</h2>
          </div>

        </div>
      </div>
    </div>

    <mat-tab-group [backgroundColor]="'primary'" style="width:100%" animationDuration="0ms" disablePagination="true"
      preserveContent="true" (selectedTabChange)="onTabChange($event)">
      <mat-tab style="color: white" label="Game Props">

        <div class="prop-section">
          <div *ngFor="let team of teamPropFinnal; let j = index;" class="away-team">
            <h2 style="margin-top: 1rem; margin-bottom:1rem; text-align:center">{{team[0].teamName}} Game Props
            </h2>

            <div style="width: 100%; display: flex; flex-wrap:wrap; justify-content:space-evenly;">
              <mat-accordion style="width:94%">
                <mat-expansion-panel *ngFor="let prop of team; let i = index;">
                  <mat-expansion-panel-header>
                    <mat-panel-title style="max-width:fit-content;">
                      {{displayPropTitle(prop)}}:
                    </mat-panel-title>
                    <mat-panel-description *ngIf="prop.propType != 'altTotal' && prop.propType != 'total'" style="display:flex; gap:1rem;">
                      {{prop.gameBookData.point > 0 ? '+' : ''}}{{prop.gameBookData.point}}
                      <button [color]="'primary'" [disabled]="prop.isDisabled == true"
                        (click)="$event.stopPropagation()" (click)="addPropToParlay(prop)"
                        style="margin-right:1rem; margin-left: auto; width:auto;" mat-raised-button>{{prop.gameBookData.price > 0 ? '+' : ''}}{{prop.gameBookData.price}}</button>
                    </mat-panel-description>
                    <mat-panel-description *ngIf="prop.propType == 'total'" style="display:flex; gap:.5rem;">
                      {{prop[0].gameBookData.point}}
                      <button [color]="'primary'" [disabled]="prop.isDisabled == true"
                        (click)="$event.stopPropagation()" (click)="addPropToParlay(prop)"
                        style=" margin-left: auto; width:auto;" mat-raised-button>{{prop[0].gameBookData.price > 0 ? '+' : ''}}{{prop[0].gameBookData.price}} U</button>
                        <button [color]="'primary'" [disabled]="prop.isDisabled == true"
                        (click)="$event.stopPropagation()" (click)="addPropToParlay(prop)"
                        style="margin-right:1rem; width:auto;" mat-raised-button>{{prop[1].gameBookData.price > 0 ? '+' : ''}}{{prop[1].gameBookData.price}} O</button>
                    </mat-panel-description>
                    <mat-panel-description *ngIf="prop.propType == 'altTotal'" style="display:flex; gap:.5rem;">
                      <mat-button-toggle-group>
                        <mat-button-toggle  *ngFor="let bet of prop; let i = index;" (change)="prop.index = i" (click)="handleClick($event)" [checked]="i == prop.index">{{bet[0].gameBookData.point}}</mat-button-toggle>
                      </mat-button-toggle-group>
                      <button [color]="'primary'" [disabled]="prop[0][0].isDisabled == true"
                        (click)="$event.stopPropagation()" 
                        style=" width:auto; margin-left:auto;" mat-raised-button>{{prop[prop.index][0].gameBookData.price > 0 ? '+' : ''}}{{prop[prop.index][0].gameBookData.price}} U</button>
                        <button [color]="'primary'" [disabled]="prop[0][0].isDisabled == true"
                        (click)="$event.stopPropagation()" 
                        style=" width:auto; margin-right:1rem;" mat-raised-button>{{prop[prop.index][1].gameBookData.price > 0 ? '+' : ''}}{{prop[prop.index][1].gameBookData.price}} O</button>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <mat-card>
                    <mat-card-header>
                      <!-- <button mat-raised-button (click)="openChart(i, team[0][0].teamName, j, prop.propVariables.marketKey)"> Prop Trend</button> -->
                    </mat-card-header>
                    <mat-card-content style="min-height:400px; padding: 0;">
                      <mat-tab-group [backgroundColor]="'primary'" style="width:100%; height:100%;"
                        disablePagination="true">
                        <mat-tab style=" color: white; display: flex; height: 100%;" label="Prop Stats">
                          <!-- <ng-template matTabContent> -->
                          <div class="full-body" style="width:100%; height:100%; display: flex; flex-direction:column;">
                            <div *ngIf="prop.propType == 'total' || prop.propType == 'altTotal'"
                              style="margin-left:1rem; display:flex; margin-top: .5rem">
                              <h4 style="margin-bottom: auto; margin-right: 5px">Under</h4>
                              <mat-slide-toggle [(ngModel)]="prop.overUnder"></mat-slide-toggle>
                              <h4 style="margin-bottom: auto">Over</h4>
                            </div>
                            <div class="full-stats"
                              style="width: 96%; display: flex; margin-right:auto; margin-left:auto; margin-top: 1rem; margin-bottom: 1rem; background-color: #ebebeb; border-radius: 10px; justify-content: space-evenly;">
                              <div class="overall-stats"
                                style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                                <div
                                  style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                                  <h3 style="margin:auto">Overall</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Record</h3>
                                  <h3 style="margin:auto" *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.overallWins}} - {{prop.overallTotal - prop.overallWins}}</h3>
                                  <h3 style="margin:auto" *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].overallWins}} - {{prop[prop.overUnder ? 0 : 1].overallTotal - prop[prop.overUnder ? 0 : 1].overallWins}}</h3>
                                    <h3 style="margin:auto" *ngIf="prop.propType == 'altTotal'">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].overallWins}} - {{prop[prop.index][prop.overUnder ? 0 : 1].overallTotal - prop[prop.index][prop.overUnder ? 0 : 1].overallWins}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Win</h3>
                                  <h3 style="margin:auto" *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.overallChance | percent:'2.2-2'}}</h3>
                                  <h3 style="margin:auto" *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].overallChance | percent: '2.2-2'}}</h3>
                                    <h3 style="margin:auto" *ngIf="prop.propType == 'altTotal'">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].overallChance | percent: '2.2-2'}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Weighted</h3>
                                  <h3 style="margin:auto" *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.overallWeighted | percent: '2.2-2'}}</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].overallWeighted | percent: '2.2-2'}}</h3>
                                    <h3 style="margin:auto" *ngIf="prop.propType == 'altTotal'">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].overallWeighted | percent: '2.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Avg</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">
                                    {{prop.averageOverall > 0 ? '+' :''}}{{prop.averageOverall | number: '1.2-2'}}</h3>
                                    <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                      {{prop[prop.overUnder ? 0 : 1].averageOverall | number: '1.2-2'}}</h3>
                                      <h3 style="margin:auto" *ngIf="prop.propType == 'altTotal'">
                                        {{prop[prop.index][prop.overUnder ? 0 : 1].averageOverall | number: '1.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">High</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.highOverall > 0 ? '+' : ''}}
                                    {{prop.highOverall | number: '1.2-2'}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                    {{prop[prop.overUnder ? 0 : 1].highOverall | number: '1.2-2'}}</h3>
                                    <h3 style="margin:auto" *ngIf="prop.propType == 'altTotal'">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].highOverall | number: '1.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Low</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.lowOverall > 0 ? '+' : ''}}
                                    {{prop.lowOverall | number: '1.2-2'}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                    {{prop[prop.overUnder ? 0 : 1].lowOverall | number: '1.2-2'}}</h3>
                                    <h3 style="margin:auto" *ngIf="prop.propType == 'altTotal'">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].lowOverall | number: '1.2-2'}}</h3>
                                </div>
                              </div>
                              <div class="homeaway-stats"
                                style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                                <div
                                  style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                                  <h3 *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'" style="margin:auto">{{prop.homeAway}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">{{prop[prop.overUnder ? 0 : 1].homeAway}}</h3>
                                  <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">{{prop[prop.index][prop.overUnder ? 0 : 1].homeAway}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Record</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.homeAwayWins}} - {{prop.homeAwayTotal - prop.homeAwayWins}}
                                    </h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].homeAwayWins}} - {{prop[prop.overUnder ? 0 : 1].homeAwayTotal - prop[prop.overUnder ? 0 : 1].homeAwayWins}}</h3>
                                    <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'altTotal'">
                                    {{prop[prop.index][prop.overUnder ? 0 : 1].homeAwayWins}} - {{prop[prop.index][prop.overUnder ? 0 : 1].homeAwayTotal - prop[prop.index][prop.overUnder ? 0 : 1].homeAwayWins}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Win</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.homeAwayChance |
                                    percent: '2.2-2'}}</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].homeAwayChance | percent: '2.2-2'}}</h3>
                                    <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'altTotal'">
                                    {{prop[prop.index][prop.overUnder ? 0 : 1].homeAwayChance | percent: '2.2-2'}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Weighted</h3>
                                  <h3 style="margin:auto" *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.homeAwayWeighted | percent: '2.2-2'}}</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].homeAwayWeighted | percent: '2.2-2'}}</h3>
                                    <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'altTotal'">
                                    {{prop[prop.index][prop.overUnder ? 0 : 1].homeAwayWeighted | percent: '2.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Avg</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.averageHomeAway > 0 ? '+' :
                                    ''}}{{prop.averageHomeAway | number: '1.2-2'}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                    {{prop[prop.overUnder ? 0 : 1].averageHomeAway | number: '1.2-2'}}</h3>
                                    <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].averageHomeAway | number: '1.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">High</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.highHomeAway > 0 ? '+' : ''}}
                                    {{prop.highHomeAway | number: '1.2-2'}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                    {{prop[prop.overUnder ? 0 : 1].highHomeAway | number: '1.2-2'}}</h3>
                                    <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].highHomeAway | number: '1.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Low</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.lowHomeAway > 0 ? '+' : ''}}
                                    {{prop.lowHomeAway | number: '1.2-2'}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                    {{prop[prop.overUnder ? 0 : 1].lowHomeAway | number: '1.2-2'}}</h3>
                                    <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].lowHomeAway | number: '1.2-2'}}</h3>
                                </div>
                              </div>
                              <div class="team-stats"
                                style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                                <div
                                  style=" width: 94%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                                  <h3 *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'" style="margin:auto">Vs {{prop.teamAgainstName}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">Vs {{prop[prop.overUnder ? 0 : 1].teamAgainstName}}</h3>
                                  <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">Vs {{prop[prop.index][prop.overUnder ? 0 : 1].teamAgainstName}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Record</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.teamWins}} - {{prop.teamTotal - prop.teamWins}}</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].teamWins}} - {{prop[prop.overUnder ? 0 : 1].teamTotal}}</h3>
                                    <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'altTotal'">
                                    {{prop[prop.index][prop.overUnder ? 0 : 1].teamWins}} - {{prop[prop.overUnder ? 0 : 1].teamTotal}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Win</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.teamChance | percent: '2.2-2'}}</h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].teamChance | percent: '2.2-2'}}</h3>
                                    <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'altTotal'">
                                    {{prop[prop.index][prop.overUnder ? 0 : 1].teamChance | percent: '2.2-2'}}</h3>
                                </div>
                                <div [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Weighted</h3>
                                  <h3 style="margin:auto" *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'">
                                    {{prop.teamWeighted | percent: '2.2-2'}}
                                  </h3>
                                  <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'total'">
                                    {{prop[prop.overUnder ? 0 : 1].teamWeighted | percent: '2.2-2'}}</h3>
                                    <h3 style="margin:auto"
                                    *ngIf="prop.propType == 'altTotal'">
                                    {{prop[prop.index][prop.overUnder ? 0 : 1].teamWeighted | percent: '2.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Avg</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.averageTeam > 0 ? '+' :''}}
                                    {{prop.averageTeam | number: '1.2-2' }}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                    {{prop[prop.overUnder ? 0 : 1].averageTeam | number: '1.2-2' }}</h3>
                                    <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].averageTeam | number: '1.2-2' }}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">High</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.highTeam > 0 ? '+' : ''}}
                                    {{prop.highTeam | number: '1.2-2'}}</h3>
                                    <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                      {{prop[prop.overUnder ? 0 : 1].highTeam | number: '1.2-2'}}</h3>
                                      <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">
                                        {{prop[prop.index][prop.overUnder ? 0 : 1].highTeam | number: '1.2-2'}}</h3>
                                </div>
                                <div *ngIf="prop.propType != 'h2h'" [ngClass]="'ml-stat'">
                                  <h3 style="margin:auto">Low</h3>
                                  <h3 *ngIf="prop.propType == 'spread'" style="margin:auto">{{prop.lowTeam > 0 ? '+' : ''}}
                                    {{prop.lowTeam | number:'1.2-2'}}</h3>
                                  <h3 *ngIf="prop.propType == 'total'" style="margin:auto">
                                    {{prop[prop.overUnder ? 0 : 1].lowTeam | number:'1.2-2'}}</h3>
                                    <h3 *ngIf="prop.propType == 'altTotal'" style="margin:auto">
                                      {{prop[prop.index][prop.overUnder ? 0 : 1].lowTeam | number:'1.2-2'}}</h3>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- </ng-template> -->
                        </mat-tab>

                        <mat-tab label="Prop Trend" [disabled]="true">
                          <ng-template matTabContent>
                            <canvas [attr.id]=listOfTeamsAndPropsForCharts[j][i]
                              style="width: 100%; height: 100%; background-color: white;">
                              {{chartVariable}}
                            </canvas>
                          </ng-template>

                        </mat-tab>
                      </mat-tab-group>
                      <h1 style="margin-top:1rem; font-weight:bold; margin-bottom:0; text-align:center">Last 10 Games
                      </h1>
                      <div style="display:flex; justify-content:space-between; margin-top: 1rem;">
                        <div style="display:flex; flex-direction: column; width:33%">
                          <div style="text-align: center;">
                            Overall
                          </div>
                          <div style=" border-right: 1px solid black;">
                            <ng-container *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop.last10Overall}">
                            </ng-container>
                            <ng-container *ngIf="prop.propType == 'total'" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop[prop.overUnder ? 0 : 1].last10Overall}">
                            </ng-container>
                            <ng-container *ngIf="prop.propType == 'altTotal'" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop[prop.index][prop.overUnder ? 0 : 1].last10Overall}">
                            </ng-container>
                          </div>
                        </div>

                        <div style="display: flex; flex-direction: column; width:33%">
                          <div *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'" style="text-align: center;">
                            {{prop.homeAway}}
                          </div>
                          <div *ngIf="prop.propType == 'total'" style="text-align: center;">
                            {{prop[prop.overUnder ? 0 : 1].homeAway}}
                          </div>
                          <div *ngIf="prop.propType == 'altTotal'" style="text-align: center;">
                            {{prop[prop.index][prop.overUnder ? 0 : 1].homeAway}}
                          </div>
                          <div style="border-right: 1px solid black;">
                            <ng-container *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop.last10HomeAway}">
                            </ng-container>
                            <ng-container *ngIf="prop.propType == 'total'" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop[prop.overUnder ? 0 : 1].last10HomeAway}">
                            </ng-container>
                            <ng-container *ngIf="prop.propType == 'altTotal'" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop[prop.index][prop.overUnder ? 0 : 1].last10HomeAway}">
                            </ng-container>
                          </div>
                        </div>

                        <div style="display:flex; flex-direction: column;width:33%; ">
                          <div *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'" style="text-align: center;">
                            vs {{prop.teamAgainstName}}
                          </div>
                          <div *ngIf="prop.propType == 'total'" style="text-align: center;">
                            vs {{prop[prop.overUnder ? 0 : 1].teamAgainstName}}
                          </div>
                          <div *ngIf="prop.propType == 'altTotal'" style="text-align: center;">
                            vs {{prop[prop.index][prop.overUnder ? 0 : 1].teamAgainstName}}
                          </div>
                          <div>
                            <ng-container *ngIf="prop.propType != 'total' && prop.propType != 'altTotal'" style="width:25%;" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop.last10Team}">
                            </ng-container>
                            <ng-container *ngIf="prop.propType == 'total'" style="width:25%;" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop[prop.overUnder ? 0 : 1].last10Team}">
                            </ng-container>
                            <ng-container *ngIf="prop.propType == 'altTotal'" style="width:25%;" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: prop[prop.index][prop.overUnder ? 0 : 1].last10Team}">
                            </ng-container>
                          </div>
                        </div>


                      </div>

                    </mat-card-content>
                  </mat-card>
                </mat-expansion-panel>
              </mat-accordion>
            </div>

          </div>

        </div>
        <div class="team-best-bets" style="width: 100%;display: flex; flex-direction: column; ">
          <h2 style="text-align: center; color: white; margin-top:1rem;">Best Bets</h2>
          <div style="margin-top:1rem; margin-bottom:1rem; margin-left:auto; margin-right:auto;">
            <h3 style="color: white; margin-bottom:0;"> Find bets with chance of winning over: {{sliderValue}}%</h3>
            <mat-slider class="example-margin" [color]="'warn'" [max]="99" [min]="51" style="width:100%;">
              <input matSliderThumb (ngModelChange)="calculateNewBestBetTeam()" [(ngModel)]="sliderValue" #slider>
            </mat-slider>
          </div>
          <div *ngIf="teamBestBets.length == 0" style="width:100%; margin-left: auto; margin-right: auto;">
            <h3 style="color:white; text-align:center">No bets with chance above {{sliderValue}}%</h3>
          </div>
          <div class="team-best-bets-body"
            style="width:100%; display:flex; gap:1rem; margin-left:auto; margin-right:auto; flex-wrap:wrap; justify-content: space-evenly;">
            <div *ngFor="let bet of teamBestBets; let i = index;">
              <mat-card>
                <mat-card-header>
                  <mat-card-title><a style="text-decoration: none; " (click)="onTeamClick(bet.teamName)">{{bet.teamName
                      }}</a> | {{displayPropTitle(bet)}} | {{bet.propType == 'spread' ? (bet.gameBookData.point > 0 ? ('+' +
                    bet.gameBookData.point): bet.gameBookData.point): (bet.propType == 'total' ? (bet.gameBookData.teamName + " | " + bet.gameBookData.point) : '')}}</mat-card-title>
                </mat-card-header>
                <mat-card-content style="min-height:400px; padding: 0;">
                  <mat-tab-group [backgroundColor]="'primary'" style="width:100%; height:100%;"
                    disablePagination="true">
                    <mat-tab style=" color: white; display: flex; height: 100%;" label="Prop Stats">
                      <!-- <ng-template matTabContent> -->
                      <div class="full-body" style="width:100%; height:100%; display: flex; flex-direction:column;">
                        <div class="full-stats"
                          style="width: 96%; display: flex; margin-right:auto; margin-left:auto; margin-top: 1rem; margin-bottom: 1rem; background-color: #ebebeb; border-radius: 10px; justify-content: space-evenly;">
                          <div class="overall-stats"
                            [ngStyle]="{'backgroundColor': bet.overallHighlight == true ? 'green' : ''}"
                            style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                            <div
                              style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                              <h3 style="margin:auto">Overall</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Record</h3>
                              <h3 style="margin:auto">
                                {{bet.overallWins}} - {{bet.overallTotal - bet.overallWins}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Win</h3>
                              <h3 style="margin:auto">
                                {{bet.overallChance | percent: '2.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Weighted</h3>
                              <h3 style="margin:auto" >{{bet.overallWeighted | percent: '2.2-2'}}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Avg</h3>
                              <h3 style="margin:auto">{{bet.propType == 'spread' && bet.averageOverall > 0 ? '+' : ''}}{{bet.averageOverall | number: '1.2-2'}}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">High</h3>
                              <h3 style="margin:auto">{{(bet.propType == 'spread' && bet.highOverall > 0) ? '+' : ''}}{{bet.highOverall | number: '1.2-2'}}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Low</h3>
                              <h3 style="margin:auto">{{(bet.propType == 'spread' && bet.lowOverall > 0 ? '+' : '')}}
                                {{bet.lowOverall | number: '1.2-2'}}</h3>
                            </div>
                          </div>
                          <div class="homeaway-stats"
                            [ngStyle]="{'backgroundColor': bet.homeAwayHighlight == true ? 'green' : ''}"
                            style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                            <div
                              style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                              <h3 style="margin:auto">{{bet.homeAway}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Record</h3>
                              <h3 style="margin:auto">
                                {{bet.homeAwayWins}} - {{bet.homeAwayTotal - bet.homeAwayWins}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Win</h3>
                              <h3 style="margin:auto">
                                {{bet.homeAwayChance | percent: '2.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Weighted</h3>
                              <h3 style="margin:auto">{{bet.homeAwayWeighted | percent: '2.2-2'}}
                              </h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Avg</h3>
                              <h3 style="margin:auto">{{ bet.propType == 'spread' && bet.averageHomeAway > 0 ? '+' :
                                ''}}{{bet.averageHomeAway | number: '1.2-2'}}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">High</h3>
                              <h3 style="margin:auto">{{(bet.propType == 'spread' && bet.highHomeAway > 0) ? '+' :
                                ''}}{{bet.highHomeAway | number: '1.2-2'}}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Low</h3>
                              <h3 style="margin:auto">{{(bet.propType == 'spread' && bet.lowHomeAway > 0) ? '+' :
                                ''}}{{bet.lowHomeAway | number: '1.2-2'}}</h3>
                            </div>
                          </div>
                          <div class="team-stats"
                            [ngStyle]="{'backgroundColor': bet.teamHighlight == true ? 'green' : ''}"
                            style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                            <div
                              style=" width: 94%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                              <h3 style="margin:auto">Vs {{bet.teamAgainstName}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Record</h3>
                              <h3 style="margin:auto">
                                {{bet.teamWins}} - {{bet.teamTotal - bet.teamWins}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Win</h3>
                              <h3 style="margin:auto">
                                {{bet.teamChance | percent: '2.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Weighted</h3>
                              <h3 style="margin:auto">{{bet.teamWeighted | percent: '2.2-2'}}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Avg</h3>
                              <h3 style="margin:auto">{{bet.propType == 'spread' && bet.averageTeam > 0 ? '+' :
                                ''}}{{(bet.totalGamesTeam == 0 ? 0 : bet.averageTeam) | number: '1.2-2' }}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">High</h3>
                              <h3 style="margin:auto">{{(bet.propType == 'spread' && bet.highTeam > 0) ? '+' :
                                ''}}{{bet.highTeam | number: '1.2-2'}}</h3>
                            </div>
                            <div *ngIf="bet.propType != 'h2h'" [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Low</h3>
                              <h3 style="margin:auto">{{(bet.propType == 'spread' && bet.lowTeam > 0) ? '+' :
                                ''}}{{bet.lowTeam | number: '1.2-2'}}</h3>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- </ng-template> -->
                    </mat-tab>

                    <mat-tab label="Prop Trend" [disabled]="true">
                      <ng-template matTabContent>
                        <canvas id="lineChart" style="width: 100%; height: 100%; background-color: white;">{{ chart
                          }}</canvas>
                      </ng-template>

                    </mat-tab>
                  </mat-tab-group>
                  <mat-accordion style="width:100%">
                    <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          Last 10 Games:
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <h1 style="margin-top:1rem; font-weight:bold; margin-bottom:0; text-align:center">Last 10 Games
                      </h1>
                      <div style="display:flex; justify-content:space-between; gap: 5px; margin-top: 1rem;">
                        <div style="display:flex; flex-direction: column; width:33%">
                          <div style="text-align: center;">
                            Overall
                          </div>
                          <div style=" border-right: 1px solid black;">
                            <ng-container [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: bet.last10Overall}">
                            </ng-container>
                          </div>
                        </div>

                        <div style="display: flex; flex-direction: column; width:33%">
                          <div style="text-align: center;">
                            {{bet.homeAway}}
                          </div>
                          <div style="border-right: 1px solid black;">
                            <ng-container style="border-right: 1px solid black" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: bet.last10HomeAway}">
                            </ng-container>
                          </div>
                        </div>

                        <div style="display:flex; flex-direction: column;width:33%; ">
                          <div style="text-align: center;">
                            vs {{bet.teamAgainstName}}
                          </div>
                          <div>
                            <ng-container style="width:25%;" [ngTemplateOutlet]="gameLog"
                              [ngTemplateOutletContext]="{ $implicit: bet.last10Team}">
                            </ng-container>
                          </div>
                        </div>


                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>

                </mat-card-content>
              </mat-card>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab style=" color: white" label="Player Props">
        <!-- <div  style="height:100%; width: 100%; background-color: white;">
          <mat-spinner [mode]="'indeterminate'" style="margin:auto;"></mat-spinner>
        </div> -->
        <div style="width: 100%; " *ngIf="playerPropDataFinalNew.length == 0">
          <h2 style="text-align: center; margin-top:2rem;">No player props available</h2>
        </div>
        <div
          style="width: 100%; display: flex; flex-wrap:wrap; justify-content:space-evenly; margin-top:1rem; margin-bottom:1rem;">
          <mat-accordion *ngFor="let prop of playerPropDataFinalNew" class="main-specific-class"
            style="width:90%; margin-bottom:.5rem;">
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  {{(prop[0].length == 0 ? prop[1][0][0].playerBookData.marketKey : prop[0][0][0].playerBookData.marketKey) | removeUnderScore |
                  removeHeading | titlecase}}:
                </mat-panel-title>
                <mat-panel-description>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <ng-template matExpansionPanelContent>
                <div class="player-dropdown">
                  <div *ngFor="let homeAway of prop; let j = index;" class="team-dropdown">
                    <h2 style="margin-left: auto; margin-right: auto;">{{homeAway.teamName}}</h2>
                    <mat-accordion *ngFor="let player of homeAway; let i = index;" class="specific-class"
                      style="margin-bottom:.5rem;">
                      <mat-expansion-panel *ngIf="homeAway.length > 0" style="margin-bottom:.5rem;">
                        <mat-expansion-panel-header>
                          <mat-panel-title style="min-width: fit-content">
                            <div *ngIf="player[0].propType == 'OU'" style="display:flex;width:100%; align-items: center; ">
                            <a (click)="playerClicked(player[0].playerId)" class="link-hover"
                              style="text-decoration: none;">{{player[0].playerName }}</a>
                            : {{player[0].playerBookData.point}}
                            
                              <button [color]="'primary'" [disabled]="player[0].isDisabled == true"
                              (click)="$event.stopPropagation()"
                              (click)="addPropToParlay(player[0])"
                              style="  width:auto; max-width:40px; height:auto; margin-left:auto;"
                              mat-raised-button>{{"U "}}{{player[0].playerBookData.price > 0 ? '+': ''}}{{player[0].playerBookData.price}}</button>
                            <button [color]="'primary'" [disabled]="player[0].isDisabled == true"
                              (click)="$event.stopPropagation()"
                              (click)="addPropToParlay(player[0])"
                              style=" width:auto; max-width:40px; height:auto; margin-right:5px;"
                              mat-raised-button>{{"O "}}{{player[1].playerBookData.price > 0 ? '+': ''}}{{player[1].playerBookData.price}}</button>
                            </div>
                            <div *ngIf="player[0].propType == 'Alt'" style="width: 100%; display:flex; align-items: center;">
                              <a (click)="playerClicked(player[0].playerId)" class="link-hover"
                              style="text-decoration: none;">{{player[0].playerName }}</a>
                              <mat-button-toggle-group name="favoriteColor" aria-label="Favorite Color" style="margin-left:1rem;">
                                <mat-button-toggle  *ngFor="let prop of player; let i = index;" (change)="player.index = i" (click)="handleClick($event)" [checked]="i == player.index">{{prop.playerBookData.point}}</mat-button-toggle>
                              </mat-button-toggle-group>
                              <button [color]="'primary'"
                              (click)="$event.stopPropagation()"
                              (click)="addPropToParlay(player[0])"
                              style=" width:auto; max-width:40px; margin-left:auto; margin-right:5px;"
                              mat-raised-button>{{player[player.index].playerBookData.price > 0 ? '+': ''}}{{player[player.index].playerBookData.price}}</button>
                            </div>
                            
                          </mat-panel-title>
                        </mat-expansion-panel-header>
                        <ng-template matExpansionPanelContent style="padding-right: .5rem; padding-left: .5rem;">
                          <mat-card>
                            <mat-card-header>
                            </mat-card-header>
                            <mat-card-content style="min-height:400px">
                              <mat-tab-group [backgroundColor]="'primary'" style="width:100%; height:100%;"
                                disablePagination="true" preserveContent>
                                <mat-tab style="color: white; display: flex; height: 100%;" label="Prop Stats">

                                  <div class="full-body"
                                    style="width:100%; height:100%; display: flex; flex-direction: column;">
                                    <div *ngIf="player[0].propType == 'OU'" style="margin-left:1rem; display:flex; margin-top: .5rem;">
                                      <h4 style="margin-bottom:auto; margin-right: 5px;">Under</h4>
                                      <mat-slide-toggle
                                        [(ngModel)]="player.overUnder"></mat-slide-toggle>
                                      <h4 style="margin-bottom:auto; margin-right: 5px;">Over</h4>
                                    </div>
                                    <div class="full-stats"
                                      style="width: 96%; display: flex; margin-right:auto; margin-left:auto; margin-top: 1rem; margin-bottom: 1rem; background-color: #ebebeb; border-radius: 10px; justify-content: space-evenly;">
                                      <div class="overall-stats"
                                        style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                                        <div
                                          style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                                          <h3 style="margin:auto">Overall</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Record</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">
                                            {{player[player.overUnder ? 1 : 0].overallWins}}-{{player[player.overUnder ? 1 : 0].overallTotal
                                            - player[player.overUnder ? 1 : 0].overallWins}}</h3>
                                            <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">
                                              {{player[player.index].overallWins}}-{{player[player.index].overallTotal
                                              - player[player.index].overallWins}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Win</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">
                                            {{player[player.overUnder ? 1 : 0].overallChance | percent: '2.2-2'}}</h3>
                                            <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">
                                              {{player[player.index].overallChance | percent: '2.2-2'}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Avg</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].averageOverall | number:'1.2-2'}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].averageOverall | number:'1.2-2'}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">High</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].highOverall}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].highOverall}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Low</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].lowOverall}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].lowOverall}}</h3>
                                        </div>
                                      </div>
                                      <div class="homeaway-stats"
                                        style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                                        <div
                                          style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].homeAway | titlecase}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].homeAway | titlecase}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Record</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">
                                            {{player[player.overUnder ? 1 : 0].homeAwayWins}} -
                                            {{player[player.overUnder ? 1 : 0].homeAwayTotal -
                                            player[player.overUnder ? 1 : 0].homeAwayWins}}</h3>
                                            <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">
                                              {{player[player.index].homeAwayWins}} -
                                              {{player[player.index].homeAwayTotal -
                                              player[player.index].homeAwayWins}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Win</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">
                                            {{player[player.overUnder ? 1 : 0].homeAwayChance | percent: '2.2-2'}}</h3>
                                            <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">
                                              {{player[player.index].homeAwayChance | percent: '2.2-2'}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Avg</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'"> {{player[player.overUnder ? 1 : 0].averageHomeAway | number:'1.2-2'}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'"> {{player[player.index].averageHomeAway | number:'1.2-2'}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">High</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].highHomeAway}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].highHomeAway}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Low</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].lowHomeAway}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].lowHomeAway}}</h3>
                                        </div>
                                      </div>
                                      <div class="team-stats"
                                        style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                                        <div
                                          style=" width: 94%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].teamAgainstName}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].teamAgainstName}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Record</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">
                                            {{player[player.overUnder ? 1 : 0].teamWins}} - {{player[player.overUnder ? 0 : 1].teamTotal
                                            - player[player.overUnder ? 1 : 0].teamWins}}</h3>
                                            <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">
                                              {{player[player.index].teamWins}} - {{player[player.index].teamTotal
                                              - player[player.index].teamWins}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Win</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">
                                            {{player[player.overUnder ? 1 : 0].teamChance | percent: '2.2-2'}}</h3>
                                            <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">
                                              {{player[player.index].teamChance | percent: '2.2-2'}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Avg</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].averageTeam | number:
                                            '1.2-2'}}</h3>
                                            <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].averageTeam | number:
                                            '1.2-2'}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">High</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].highTeam}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].highTeam}}</h3>
                                        </div>
                                        <div [ngClass]="'ml-stat'">
                                          <h3 style="margin:auto">Low</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'OU'">{{player[player.overUnder ? 1 : 0].lowTeam}}</h3>
                                          <h3 style="margin:auto" *ngIf="player[0].propType == 'Alt'">{{player[player.index].lowTeam}}</h3>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </mat-tab>
                                <mat-tab label="Prop Trend" [disabled]="true">
                                  <ng-template matTabContent>
                                    <canvas id="lineChart"
                                      style="width: 100%; height: 100%; background-color: white;">{{ chart
                                      }}</canvas>
                                  </ng-template>

                                </mat-tab>
                              </mat-tab-group>
                              <h1 style="margin-top:1rem; font-weight:bold; margin-bottom:0;">Last 10 Games</h1>
                              <div style="display:flex; justify-content:space-between; gap: 5px; margin-top: 1rem; ">
                                <div style="display: flex; flex-direction: column; width:33%">
                                  <div style="text-align: center;">
                                    Overall
                                  </div>
                                  <div style="border-right: 1px solid black; ">
                                    <ng-container [ngTemplateOutlet]="playerGameLog"
                                      [ngTemplateOutletContext]="{ $implicit: player[player.overUnder ? 1 : 0].last10Overall}">
                                    </ng-container>
                                  </div>
                                </div>

                                <div style="display: flex; flex-direction: column;width:33%">
                                  <div style="text-align: center;">
                                    {{player[player.overUnder ? 0 : 1].homeAway | titlecase}}
                                  </div>
                                  <div style="border-right: 1px solid black;">
                                    <ng-container style="border-right: 1px solid black"
                                      [ngTemplateOutlet]="playerGameLog"
                                      [ngTemplateOutletContext]="{ $implicit: player[player.overUnder ? 1 : 0].last10HomeAway}">
                                    </ng-container>
                                  </div>
                                </div>

                                <div style="display:flex; flex-direction: column;width:33%">
                                  <div style="text-align: center;">
                                    vs {{player[player.overUnder ? 1 : 0].teamAgainstName}}
                                  </div>
                                  <div>
                                    <ng-container [ngTemplateOutlet]="playerGameLog"
                                      [ngTemplateOutletContext]="{ $implicit: player[player.overUnder ? 0 : 1].last10Team}">
                                    </ng-container>
                                  </div>
                                </div>


                              </div>

                            </mat-card-content>
                          </mat-card>
                        </ng-template>
                      </mat-expansion-panel>
                    </mat-accordion>
                  </div>

                </div>

              </ng-template>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
        <div *ngIf="playerPropDataFinalNew.length > 0" class="team-best-bets"
          style="width: 100%;display: flex; flex-direction: column; ">
          <h2 style="text-align: center; color: white; margin-top:1rem;">Best Bets</h2>
          <div style="margin-top:1rem; margin-bottom:1rem; margin-left:auto; margin-right:auto;">
            <h3 style="color: white; margin-bottom:0;"> Find bets with chance of winning over: {{sliderValuePlayer}}%
            </h3>
            <mat-slider class="example-margin" [color]="'warn'" [max]="99" [min]="51" style="width:100%;">
              <input matSliderThumb (ngModelChange)="calculateNewBestBetPlayer()" [(ngModel)]="sliderValuePlayer"
                #slider>
            </mat-slider>
          </div>
          <div *ngIf="playerBestBets.length == 0" style="width:100%; margin-left: auto; margin-right: auto;">
            <h3 style="color:white; text-align:center">No bets with chance above {{sliderValuePlayer}}%</h3>
          </div>
          <div class="team-best-bets-body"
            style="width:100%; display:flex; gap:1rem; margin-left:auto; margin-right:auto; flex-wrap:wrap; justify-content: space-evenly; margin-bottom: 1rem;">
            <div *ngFor="let bet of playerBestBets; let i = index;">
              <mat-card>
                <mat-card-header>
                  <mat-card-title class="name-link"><a class="name-link"
                      (click)="playerClicked(bet.playerId)">{{bet.playerName
                      }}</a> | {{bet.playerBookData.marketKey | removeUnderScore | removeHeading | titlecase}} | {{bet.playerBookData.point}} |
                    {{bet.playerBookData.description}}</mat-card-title>
                </mat-card-header>
                <mat-card-content style="min-height:400px; padding: 0;">
                  <mat-tab-group [backgroundColor]="'primary'" style="width:100%; height:100%;"
                    disablePagination="true">
                    <mat-tab style=" color: white; display: flex; height: 100%;" label="Prop Stats">
                      <!-- <ng-template matTabContent> -->
                      <div class="full-body" style="width:100%; height:100%; display: flex; flex-direction:column;">
                        <div class="full-stats"
                          style="width: 96%; display: flex; margin-right:auto; margin-left:auto; margin-top: 1rem; margin-bottom: 1rem; background-color: #ebebeb; border-radius: 10px; justify-content: space-evenly;">
                          <div class="overall-stats"
                            [ngStyle]="{'backgroundColor': bet.overallHighlight == true ? 'green' : ''}"
                            style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                            <div
                              style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                              <h3 style="margin:auto">Overall</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Record</h3>
                              <h3 style="margin:auto" >
                                {{bet.overallWins}} - {{bet.overallTotal - bet.overallWins}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Win</h3>
                              <h3 style="margin:auto" >
                                {{bet.overallChance | percent: '2.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Avg</h3>
                              <h3 style="margin:auto">{{bet.averageOverall | number: '1.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">High</h3>
                              <h3 style="margin:auto">{{bet.highOverall | number: '1.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Low</h3>
                              <h3 style="margin:auto">{{bet.lowOverall | number: '1.2-2'}}</h3>
                            </div>
                          </div>
                          <div class="homeaway-stats"
                            [ngStyle]="{'backgroundColor': bet.homeAwayHighlight == true ? 'green' : ''}"
                            style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                            <div
                              style=" width: 96%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                              <h3 style="margin:auto">{{bet.homeAway | titlecase}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Record</h3>
                              <h3 style="margin:auto" >
                                {{bet.homeAwayWins}} - {{bet.homeAwayTotal - bet.homeAwayWins}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Win</h3>
                              <h3 style="margin:auto" >
                                {{bet.homeAwayChance | percent: '2.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Avg</h3>
                              <h3 style="margin:auto">{{bet.averageHomeAway | number: '1.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">High</h3>
                              <h3 style="margin:auto">{{bet.highHomeAway | number: '1.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Low</h3>
                              <h3 style="margin:auto">{{bet.lowHomeAway | number: '1.2-2'}}</h3>
                            </div>
                          </div>
                          <div class="team-stats"
                            [ngStyle]="{'backgroundColor': bet.teamHighlight == true ? 'green' : ''}"
                            style="width: 30%; height:100%; display: flex; flex-direction: column; background-color:#fb8501;">
                            <div
                              style=" width: 94%; margin-left:auto; margin-right:auto; margin-top:5px; display:flex;">
                              <h3 style="margin:auto">Vs {{bet.teamAgainstName}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Record</h3>
                              <h3 style="margin:auto" >
                                {{bet.teamWins}} - {{bet.teamTotal - bet.teamWins}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Win</h3>
                              <h3 style="margin:auto" >
                                {{bet.teamChance | percent: '2.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Avg</h3>
                              <h3 style="margin:auto">{{bet.averageTeam | number: '1.2-2' }}
                              </h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">High</h3>
                              <h3 style="margin:auto">{{bet.highTeam | number: '1.2-2'}}</h3>
                            </div>
                            <div [ngClass]="'ml-stat'">
                              <h3 style="margin:auto">Low</h3>
                              <h3 style="margin:auto">{{bet.lowTeam | number: '1.2-2'}}</h3>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- </ng-template> -->
                    </mat-tab>

                    <mat-tab label="Prop Trend" [disabled]="true">
                      <ng-template matTabContent>
                        <canvas id="lineChart" style="width: 100%; height: 100%; background-color: white;">{{ chart
                          }}</canvas>
                      </ng-template>

                    </mat-tab>
                  </mat-tab-group>
                  <mat-accordion style="width:100%">
                    <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          Last 10 Games:
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      <h1 style="margin-top:1rem; font-weight:bold; margin-bottom:0; text-align:center">Last 10 Games
                      </h1>
                      <div style="display:flex; justify-content:space-between; gap: 5px; margin-top: 1rem;">
                        <div style="display:flex; flex-direction: column; width:33%">
                          <div style="text-align: center;">
                            Overall
                          </div>
                          <div style=" border-right: 1px solid black;">
                            <ng-container [ngTemplateOutlet]="playerGameLog"
                              [ngTemplateOutletContext]="{ $implicit: bet.last10Overall}">
                            </ng-container>
                          </div>
                        </div>

                        <div style="display: flex; flex-direction: column; width:33%">
                          <div style="text-align: center;">
                            {{bet.homeAway}}
                          </div>
                          <div style="border-right: 1px solid black;">
                            <ng-container style="border-right: 1px solid black" [ngTemplateOutlet]="playerGameLog"
                              [ngTemplateOutletContext]="{ $implicit: bet.last10HomeAway}">
                            </ng-container>
                          </div>
                        </div>

                        <div style="display:flex; flex-direction: column;width:33%; ">
                          <div style="text-align: center;">
                            vs {{bet.teamAgainstName}}
                          </div>
                          <div>
                            <ng-container style="width:25%;" [ngTemplateOutlet]="playerGameLog"
                              [ngTemplateOutletContext]="{ $implicit: bet.last10Team}">
                            </ng-container>
                          </div>
                        </div>


                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>

                </mat-card-content>
              </mat-card>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Live Props">
        <ng-template matTabContent>
          <div class="live-main-div">
            <div *ngFor="let team of liveProps; let i = index;" class="live-team-div">
              <div style="width:100%; display: flex; flex-direction: column;">
                <h2 style="text-align: center; color: white;">{{team.stats[0].teamName}}</h2>
                <div style="width:90%; margin-left: auto; margin-right: auto; display:flex;">
                  <h3 style="align-self:center; color:white; margin-right:1rem;">Chance of winning when: </h3>
                  <mat-form-field style="min-width:auto;">
                    <mat-select [value]="team.selectedDropDown" [(ngModel)]="team.selectedDropDown"
                      (selectionChange)="calcNewLiveProp(i)">
                      <mat-option *ngFor="let stat of liveMoneylineStats" value={{stat}}>{{stat}}</mat-option>
                    </mat-select>
                  </mat-form-field>


                </div>
                <div class="chart-container" style="background-color: #ebebeb;">
                  <canvas [attr.id]="'MyChart' + i">{{ 'barChart'+i }}</canvas>
                </div>
              </div>

            </div>
          </div>
        </ng-template>
      </mat-tab>
    </mat-tab-group>




  </div>




  <app-prop-checkout [listOfProps]="finalPropParlays" (exitSend)="isExit($any($event))"
    (length)="getArrayLength($event)" *ngIf="finalPropParlays.length > 0 && exit"></app-prop-checkout>
  <app-prop-trend [trendData]="createTrendChartData" (exitSend)="isExit($any($event))" (length)="getArrayLength($event)"
    *ngIf="createTrendChartData.length > 0 && exit"></app-prop-trend>
</div>